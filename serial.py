from machine import Pin, PWM, UART, I2C
import time
import sys
from picobricks import SSD1306_I2C
import framebuf

WIDTH  = 128   
HEIGHT = 64

i2c = I2C(0, scl=Pin(5), sda=Pin(4), freq=115200)  
oled = SSD1306_I2C(WIDTH, HEIGHT, i2c, addr=0x3c)

def basescreen():
    cpu = bytearray(b"\x00\x00\x00\x00\x00DH\x00\x00\x88\x84\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xff\xff\x00\x07\xff\xff\x80\x07\xff\xff\x80'\xff\xff\x88G\xff\xff\x90\x07\xc0\x0f\x80\x07\xc0\x0f\x80G\xc0\x0f\x88'\xc0\x0f\x90\x07\xc0\x0f\x80\x07\xc0\x0f\x80G\xc0\x0f\x90'\xc0\x0f\x88\x07\xc0\x0f\x80\x07\xc0\x0f\x80G\xff\xff\x90'\xff\xff\x88\x07\xff\xff\x80\x07\xff\xff\x80\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00DH\x00\x00\x88\x84\x00\x00\x00\x00\x00")
    ram = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x7f\xff\xff\xfe\xed\xb6\xdbo\xc0\x00\x00\x02\x87\x9ey\xc3\xc4\x92I#\xc4\x92I"\xc4\x92I#\x84\x92I#\xc7\x1cq\xc3\xc0\x00\x00\x02\xbf\xff\xff\xffv\xdbm\xb5\x10\x00\x00\x08\x12\xaaUH\x10\x00\x00\x08\x10\x00\x00\x08\x0f\xff\xff\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')

    cpu1 = framebuf.FrameBuffer(cpu,30,30,framebuf.MONO_HLSB)
    ram1 = framebuf.FrameBuffer(ram,32,32,framebuf.MONO_HLSB)

    oled.rect(0,0,128,64,framebuf.MONO_HLSB)
    oled.line(0,10,128,10,framebuf.MONO_HLSB)
    oled.line(64,10,64,64,framebuf.MONO_HLSB)
    oled.text("SYSTEM MONITOR",10,2)
    oled.text("CPU:%",2,50)
    #oled.text("00",44,50)
    oled.text("RAM:%",66,50)
    #oled.text("00",107,50)
    oled.blit(cpu1,15,13)
    oled.blit(ram1,80,12)
    oled.show()

#uart = UART(1,115200)
#cpu = sys.stdin.readline().strip()  
#print(cpu)
while True:
    cpu = sys.stdin.readline().strip()
    ram = sys.stdin.readline().strip()
    print("CPU: ",cpu,"-------","RAM: ",ram)
    basescreen()
    oled.text(cpu,44,50)
    oled.text(ram,107,50)
    oled.show()
    time.sleep(1)
    oled.fill(0)
    
    
    
